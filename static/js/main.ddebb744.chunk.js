(this["webpackJsonpmarvel-heroes"]=this["webpackJsonpmarvel-heroes"]||[]).push([[0],{100:function(e,t,a){e.exports=a.p+"static/media/logo.f19e3c78.png"},108:function(e,t,a){e.exports=a(138)},138:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(63),o=a.n(c),i=a(2),u=a(29),l=a(141),s=a(140),d=function(e){return n.a.createElement(s.f,{sx:{flexDirection:"column",justifyContent:"center"}},e.header,n.a.createElement(s.e,{sx:{py:2,maxWidth:"64em"}},e.children))},m=a(100),f=a.n(m),h=function(){return n.a.createElement(s.f,{as:"header",sx:{justifyContent:"center",borderBottom:"1px solid",borderColor:"gray.4"}},n.a.createElement(s.e,{sx:{py:3,maxWidth:"64em"}},n.a.createElement(s.f,{sx:{justifyContent:"space-between",alignItems:"center"}},n.a.createElement(s.f,null,n.a.createElement(u.b,{to:"/"},n.a.createElement(s.i,{sx:{maxWidth:"100px"},src:f.a}))),n.a.createElement(s.f,{sx:{flexDirection:"column",textAlign:"right"}},n.a.createElement(s.n,null,"Matheus Gambati"),n.a.createElement(s.l,{href:"https://github.com/mgambati"},"Github"),n.a.createElement(s.l,{href:"https://www.linkedin.com/in/matheusgambati/"},"LinkedIn")))))},b=a(4),p=a(87),E=a(142),v=a(10),g=a.n(v),j=a(31),O=a(14),x=a(26),y=a(66),C={getAll:function(){var e=localStorage.getItem("editedCharacters");return e?JSON.parse(e):{}},getById:function(e){return C.getAll()[e]},saveEdited:function(e){var t=e.name,a=e.description,r=C.getAll(),n=Object(x.a)({},r,Object(y.a)({},e.id,{name:t,description:a}));localStorage.setItem("editedCharacters",JSON.stringify(n))}},w=C,S=a(101),k=a.n(S),I=a(102);var B=k.a.create({baseURL:"https://gateway.marvel.com/v1/public/",paramsSerializer:I.stringify});function q(){return D.apply(this,arguments)}function D(){return(D=Object(j.a)(g.a.mark((function e(){var t,a,r,n,c,o,i=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:0,a=i.length>1?i[1]:void 0,r={nameStartsWith:a,offset:t,limit:20},e.next=5,B.get("/characters",{params:r});case 5:return n=e.sent,c=n.data,o=c.data.results.map((function(e){var t=w.getById(e.id);return t?Object(x.a)({},e,{},t):e})),e.abrupt("return",Object(x.a)({},c.data,{results:o}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return P.apply(this,arguments)}function P(){return(P=Object(j.a)(g.a.mark((function e(t){var a,r,n,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.get("/characters/".concat(t));case 2:return a=e.sent,r=a.data,n=w.getById(t),c=r.data.results[0],e.abrupt("return",n?Object(x.a)({},c,{},n):c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}B.interceptors.request.use((function(e){return e.params=Object(x.a)({},e.params,{apikey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_MARVEL_API_KEY}),e}));var _=Object(O.b)("characters/loadCharacters",function(){var e=Object(j.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t.offset,t.query);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),W=Object(O.b)("characters/loadSingleCharacter",function(){var e=Object(j.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A=function(){var e=Object(r.useState)(""),t=Object(p.a)(e,2),a=t[0],c=t[1],o=Object(E.a)(a,500),u=Object(p.a)(o,1)[0],l=Object(i.b)();return Object(r.useEffect)((function(){l(_({query:u||void 0,offset:0}))}),[u,l]),n.a.createElement(s.b,{sx:{my:2,borderRadius:"lg",bg:"red.7",p:3}},n.a.createElement(s.n,{as:"label",color:"white"},"Procurar Personagem"),n.a.createElement(s.j,{"data-testid":"search-input",sx:{borderColor:"white","::placeholder":{color:"white",opacity:.7}},placeholder:"Hulk",value:a,onChange:function(e){return c(e.target.value)}}))},R=Object(O.c)(),T=Object(O.d)({name:"characters",initialState:R.getInitialState({query:void 0,offset:0,total:0,status:{all:"idle"}}),reducers:{},extraReducers:function(e){e.addCase(_.pending,(function(e){e.status.all="pending"})),e.addCase(_.fulfilled,(function(e,t){var a=e.query!==t.meta.arg.query,r=0===t.payload.offset;a||r?R.setAll(e,t.payload.results):R.addMany(e,t.payload.results),e.status.all="idle",e.query=t.meta.arg.query,e.offset=t.payload.offset,e.total=t.payload.total})),e.addCase(_.rejected,(function(e){e.status.all="error"})),e.addCase(W.pending,(function(e,t){var a=t.meta.arg;e.status[a]="pending"})),e.addCase(W.fulfilled,(function(e,t){var a=t.meta.arg;R.upsertOne(e,t.payload),e.status[a]="idle"})),e.addCase(W.rejected,(function(e,t){var a=t.meta.arg;e.status[a]="error"}))}}).reducer,F=a(27),L=R.getSelectors(),N=Object(F.a)((function(e){return e.characters}),L.selectIds),G=function(e){return function(t){return L.selectById(t.characters,e)}},J=function(e){return e.characters.status.all},K=function(e){return e.characters.query},Y=function(e){return e.characters.offset},H=n.a.memo((function(e){var t=e.id,a=Object(r.useMemo)((function(){return G(t)}),[t]),c=Object(i.c)(a),o="".concat(null===c||void 0===c?void 0:c.thumbnail.path,".").concat(null===c||void 0===c?void 0:c.thumbnail.extension);return n.a.createElement(u.b,{to:"/characters/".concat(t),"data-testid":"character-card"},n.a.createElement(s.d,{sx:{display:"flex",borderRadius:"lg",flexDirection:"column",overflow:"hidden",bg:"red.7",":hover":{opacity:.8}}},n.a.createElement(s.a,{ratio:.75},n.a.createElement(s.i,{src:o,sx:{maxWidth:"none",objectFit:"cover",objectPosition:"center",height:"100%"}})),n.a.createElement(s.f,{sx:{flexGrow:1,justifyContent:"center",flexDirection:"column"}},n.a.createElement(s.n,{sx:{m:2},color:"white"},null===c||void 0===c?void 0:c.name))))})),U=function(){var e=Object(i.c)(N),t=Object(i.c)(J),a=Object(i.c)(K),c=Object(i.c)(Y),o=Object(i.b)(),u=Object(r.useCallback)((function(){o(_({query:a,offset:c+20}))}),[o,a,c]);return n.a.createElement(s.b,null,n.a.createElement(s.g,{columns:"1fr 1fr 1fr 1fr"},e.map((function(e){return n.a.createElement(H,{key:e,id:e})}))),n.a.createElement(s.f,{sx:{justifyContent:"center",marginY:2}},"pending"===t?n.a.createElement(s.m,{"data-testid":"loading-characters-spinner"}):n.a.createElement(s.c,{"data-testid":"load-more-btn",onClick:u},"Carregar mais")))},V=function(){return n.a.createElement(s.f,{sx:{flexDirection:"column"}},n.a.createElement(s.h,null,"Personagens Marvel"),n.a.createElement(A,null),n.a.createElement(U,null))},z=a(107),$=a(79),Q=Object($.a)({name:Object($.b)().required(),description:Object($.b)().required()}),X=function(e){var t=Object(i.b)(),a=Object(b.f)().push,r=Object(z.a)({initialValues:e.character,validationSchema:Q,onSubmit:function(e){a("/characters/".concat(e.id)),t(W(e.id)),w.saveEdited(e)}}),c=r.values,o=r.handleChange,u=r.handleBlur,l=r.handleSubmit;return n.a.createElement("form",{onSubmit:l},n.a.createElement(s.k,{htmlFor:"name"},"Nome"),n.a.createElement(s.j,{name:"name",onChange:o,onBlur:u,value:c.name}),n.a.createElement(s.k,{sx:{mt:2},htmlFor:"description"},"Descri\xe7\xe3o"),n.a.createElement(s.o,{name:"description",onChange:o,onBlur:u,value:c.description,rows:6}),n.a.createElement(s.c,{type:"submit",sx:{mt:2}},"Salvar"))};function Z(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(j.a)(g.a.mark((function e(t){var a,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.get("/characters/".concat(t,"/series"));case 2:return a=e.sent,r=a.data,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te=Object(O.b)("series/loadSeriesByCharacter",function(){var e=Object(j.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ae=Object(O.c)(),re=Object(O.d)({name:"characters",initialState:ae.getInitialState({byCharacter:{},status:{}}),reducers:{},extraReducers:function(e){e.addCase(te.pending,(function(e,t){var a=t.meta.arg,r="character.".concat(a);e.status[r]="pending"})),e.addCase(te.fulfilled,(function(e,t){var a=t.meta.arg,r="character.".concat(a),n=t.payload.results.map((function(e){return e.id}));e.status[r]="idle",e.byCharacter[a]=n,ae.upsertMany(e,t.payload.results)})),e.addCase(te.rejected,(function(e,t){var a=t.meta.arg,r="character.".concat(a);e.status[r]="error"}))}}).reducer,ne=ae.getSelectors(),ce=function(e){var t=e.id,a=Object(r.useMemo)((function(){return function(e){return function(t){return ne.selectById(t.series,e)}}(t)}),[t]),c=Object(i.c)(a),o="".concat(null===c||void 0===c?void 0:c.thumbnail.path,".").concat(null===c||void 0===c?void 0:c.thumbnail.extension);return n.a.createElement(s.d,{sx:{display:"flex",borderRadius:"lg",flexDirection:"column",overflow:"hidden",bg:"red.7",":hover":{opacity:.8}},"data-testid":"serie-card"},n.a.createElement(s.a,{ratio:1},n.a.createElement(s.i,{src:o,sx:{width:"100%",objectFit:"cover",objectPosition:"center",height:"100%"}})),n.a.createElement(s.f,{sx:{flexGrow:1,justifyContent:"center",flexDirection:"column"}},n.a.createElement(s.n,{sx:{m:2},color:"white"},null===c||void 0===c?void 0:c.title)))},oe=function(e){var t=e.characterId,a=Object(r.useMemo)((function(){return function(e){return function(t){return t.series.byCharacter[e]}}(t)}),[t]),c=Object(r.useMemo)((function(){return function(e){return function(t){return t.series.status["character.".concat(e)]}}(t)}),[t]),o=Object(i.c)(a),u=Object(i.c)(c),l=Object(i.b)();return Object(r.useEffect)((function(){l(te(t))}),[l,t]),"pending"===u?n.a.createElement(s.f,{sx:{justifyContent:"center"},"data-testid":"loading-spinner"},n.a.createElement(s.m,null)):n.a.createElement(s.g,{columns:"1fr 1fr 1fr 1fr"},null===o||void 0===o?void 0:o.map((function(e){return n.a.createElement(ce,{key:e,id:e})})))},ie=function(){var e=Object(b.g)().id,t=Object(r.useMemo)((function(){return G(e)}),[e]),a=Object(r.useMemo)((function(){return function(e){return function(t){return t.characters.status[e]}}(e)}),[e]),c=Object(i.c)(t),o=Object(i.c)(a),l="".concat(null===c||void 0===c?void 0:c.thumbnail.path,".").concat(null===c||void 0===c?void 0:c.thumbnail.extension),d=Object(i.b)();return Object(r.useEffect)((function(){d(W(e))}),[d,e]),"pending"===o?n.a.createElement(s.f,{sx:{justifyContent:"center",marginY:2}},n.a.createElement(s.m,null)):n.a.createElement(s.g,{columns:"1fr 4fr",sx:{marginY:2}},n.a.createElement(s.b,null,n.a.createElement(s.a,{ratio:.75},n.a.createElement(s.i,{src:l,sx:{maxWidth:"none",objectFit:"cover",objectPosition:"center",height:"100%"}}))),n.a.createElement(s.b,null,n.a.createElement(b.c,null,n.a.createElement(b.a,{path:"/characters/:id/edit"},c&&n.a.createElement(X,{character:c})),n.a.createElement(b.a,{path:"/characters/:id"},n.a.createElement(s.f,null,n.a.createElement(s.h,{as:"h2",color:"red.7",sx:{mr:2}},null===c||void 0===c?void 0:c.name),n.a.createElement(u.b,{to:"/characters/".concat(e,"/edit")},n.a.createElement(s.c,{sx:{fontSize:"14px",py:1}},"Editar"))),n.a.createElement(s.n,null,null===c||void 0===c?void 0:c.description),n.a.createElement(s.h,{as:"h3",color:"red.7"},"Series"),n.a.createElement(oe,{characterId:e})))))},ue=function(){return n.a.createElement(b.c,null,n.a.createElement(b.a,{path:"/",exact:!0,component:V}),n.a.createElement(b.a,{path:"/characters/:id",component:ie}))};var le=function(){return n.a.createElement(d,{header:n.a.createElement(h,null)},n.a.createElement(ue,null))},se=Object(O.a)({reducer:{characters:T,series:re}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var de=a(78),me=Object(x.a)({},de.a,{colors:Object(x.a)({},de.a.colors,{primary:de.a.colors.dark})});o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(i.a,{store:se},n.a.createElement(l.a,{theme:me},n.a.createElement(u.a,null,n.a.createElement(le,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[108,1,2]]]);
//# sourceMappingURL=main.ddebb744.chunk.js.map